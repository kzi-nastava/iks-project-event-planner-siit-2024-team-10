<div class="container" *ngIf="offering">
  <div class="card">
    <!-- Left Side - Image Section -->
    <div class="image-section">
      <div class="carousel">
        <img [src]="images[activeImage]" [alt]="'Image ' + (activeImage + 1)" class="main-image">
      </div>
      <div class="thumbnails">
        <img 
          *ngFor="let image of images; let i = index"
          [src]="image"
          [alt]="'Thumbnail ' + (i + 1)"
          class="thumbnail"
          [class.active]="i === activeImage"
          (click)="setActiveImage(i)"
        >
      </div>
    </div>

    <!-- Right Side - Details Section -->
    <div class="details-section">
      <h1 class="product-title">{{offering.name}}</h1>

      <div class="price-availability">
        <span class="price">{{offering.price}}€</span>
        <span class="availability">Available</span>
      </div>

      <div class="provider">
        <span>Provider: {{offering.provider}}</span>
      </div>

      <div class="rating">
        <span class="stars">★★★★☆</span>
        <span class="rating-number">({{offering.rating}})</span>
      </div>

      <mat-accordion>
        <mat-expansion-panel class="blue-panel">
          <mat-expansion-panel-header>
            <mat-panel-title>Category</mat-panel-title>
          </mat-expansion-panel-header>
          <p>{{offering.category}}</p>
        </mat-expansion-panel>

        <mat-expansion-panel class="yellow-panel" *ngIf="offering.isProduct">
          <mat-expansion-panel-header>
            <mat-panel-title>Event Types</mat-panel-title>
          </mat-expansion-panel-header>
          <p>{{offering.eventTypes?.join(', ')}}</p>
        </mat-expansion-panel>
      </mat-accordion>

      <button class="learn-more-btn">Book Now</button>
    </div>
  </div>

  <!-- Comments Section -->
  <div class="comments-section">
    <h2>Customer Reviews</h2>
    
    <!-- New Comment Form -->
    <div class="comment-form">
      <h3>Leave a Review</h3>
      <div class="rating-input">
        <span>Your Rating:</span>
        <div class="stars-input">
          <span 
            *ngFor="let star of getStarArray(5); let i = index"
            (click)="setRating(i + 1)"
            [class.filled]="i < userRating"
            class="star-icon"
          >★</span>
        </div>
      </div>
      <input 
        type="text" 
        [(ngModel)]="newComment.userName" 
        placeholder="Your Name"
        class="input-field"
      >
      <textarea 
        [(ngModel)]="newComment.text" 
        placeholder="Your Review"
        class="input-field"
      ></textarea>
      <button 
        (click)="submitComment()"
        class="submit-btn"
        [disabled]="!newComment.userName || !newComment.text || !newComment.rating"
      >Submit Review</button>
    </div>

    <!-- Existing Comments -->
    <div class="comments-list">
      <div *ngFor="let comment of comments" class="comment-card">
        <div class="comment-header">
          <span class="user-name">{{ comment.userName }}</span>
          <div class="stars">
            <span *ngFor="let star of getStarArray(comment.rating)">
              {{ star ? '★' : '☆' }}
            </span>
          </div>
        </div>
        <p class="comment-text">{{ comment.text }}</p>
        <span class="comment-date">{{ comment.date | date }}</span>
      </div>
    </div>
  </div>
</div>